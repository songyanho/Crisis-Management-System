<!DOCTYPE html>
<html lang="en">

<head>
    <base href="{{ baseHref }}" />
    <meta charset="utf-8">
    <title>{% if title|length > 0 %}{{ title ~ ' | ' }}{% endif %}{{ maintitle }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link href="report-resource/css/bootstrap.min.css" rel="stylesheet">
    <link href="report-resource/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600" rel="stylesheet">
    <link href="report-resource/css/font-awesome.css" rel="stylesheet">
    <link href="report-resource/css/style.css" rel="stylesheet">
    <link href="report-resource/css/pages/dashboard.css" rel="stylesheet">
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container"> <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span
                    class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span> </a><a class="brand" href="{{ path_for(constant('CMS::ROLE_GUEST') ~ '#public@redirect') }}">C M S</a>
            </div>
            <!-- /container -->
        </div>
        <!-- /navbar-inner -->
    </div>
    <!-- /subnavbar -->
    <div class="main">

        <div class="main-inner">

            <div class="container">
                    
                    
                <div class="row">
                    <div class="span4">
                        <div class="widget widget-nopad">
                            <div class="widget-header"> <i class="icon-list-alt"></i>
                                <h3>Current Status</h3>
                            </div>
                            <div class="widget-content">
                                <div class="widget big-stats-container">
                                    <div class="widget-content" style="text-align: center;padding: 50px;color: red;">
                                        {% if crisis %}
                                        <h1>CRISIS</h1>
                                        {% else %}
                                        <h1>SAFE</h1>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="span8">
                        <div class="widget widget-nopad">
                            <div class="widget-header"> <i class="icon-list-alt"></i>
                                <h3>Today's Statistics</h3>
                            </div>
                            <!-- /widget-header -->
                            <div class="widget-content">
                                <div class="widget big-stats-container">
                                    <div class="widget-content">
                                        <div id="big_stats" class="cf">
                                            <div class="stat"> <i class="icon-time"></i><h4>Total</h4> <span class="value">{{ stats.today }}</span> </div>
                                            <!-- .stat -->

                                            <div class="stat"> <i class="icon-warning-sign"></i><h4>Active</h4> <span class="value">{{ stats.today-active }}</span> </div>
                                            <!-- .stat -->

                                            <div class="stat"> <i class="icon-smile"></i><h4>Inactive</h4> <span class="value">{{ stats.today-inactive }}</span> </div>
                                            <!-- .stat -->

                                            <div class="stat"> <i class="icon-ok"></i><h4>Conversion Rate</h4> <span class="value">{{ stats.today }}%</span> </div>
                                            <!-- .stat -->
                                        </div>
                                    </div>
                                    <!-- /widget-content -->

                                </div>
                            </div>
                        </div>

                    <!--div class="span12">

                        <div class="info-box">
                            <div class="row-fluid stats-box">
                                <div class="span4">
                                    <div class="stats-box-title">Vizitor</div>
                                    <div class="stats-box-all-info"><i class="icon-user" style="color:#3366cc;"></i> 555K</div>
                                    <div class="wrap-chart">
                                        <div id="visitor-stat" class="chart" style="padding: 0px; position: relative;">
                                            <canvas id="bar-chart1" class="chart-holder" height="150" width="325"></canvas>
                                        </div>
                                    </div>
                                </div>

                                <div class="span4">
                                    <div class="stats-box-title">Likes</div>
                                    <div class="stats-box-all-info"><i class="icon-thumbs-up" style="color:#F30"></i> 66.66</div>
                                    <div class="wrap-chart">
                                        <div id="order-stat" class="chart" style="padding: 0px; position: relative;">
                                            <canvas id="bar-chart2" class="chart-holder" height="150" width="325"></canvas>
                                        </div>
                                    </div>
                                </div>

                                <div class="span4">
                                    <div class="stats-box-title">Orders</div>
                                    <div class="stats-box-all-info"><i class="icon-shopping-cart" style="color:#3C3"></i> 15.55</div>
                                    <div class="wrap-chart">

                                        <div id="user-stat" class="chart" style="padding: 0px; position: relative;">
                                            <canvas id="bar-chart3" class="chart-holder" height="150" width="325"></canvas>
                                        </div>

                                    </div>
                                </div>
                            </div>


                        </div>


                    </div-->
                </div>
                </div>
                <!-- /row -->

                <div class="row">

                    <div class="span6">

                        <div class="widget">

                            <div class="widget-header">
                                <i class="icon-star"></i>
                                <h3>Incident Categories</h3>
                            </div>
                            <!-- /widget-header -->

                            <div class="widget-content">
                                <canvas id="pie-chart" class="chart-holder" height="250" width="538"></canvas>
                            </div>
                            <!-- /widget-content -->

                        </div>
                        <!-- /widget -->




                    </div>
                    <!-- /span6 -->


                    <div class="span6">

                        <div class="widget">

                            <div class="widget-header">
                                <i class="icon-list-alt"></i>
                                <h3>History</h3>
                            </div>
                            <!-- /widget-header -->

                            <div class="widget-content">
                                <canvas id="bar-chart" class="chart-holder" height="250" width="538"></canvas>
                            </div>
                            <!-- /widget-content -->

                        </div>
                        <!-- /widget -->

                    </div>
                    <!-- /span6 -->

                    <div class="span12">

                        <div class="widget">

                            <div class="widget-header">
                                <i class="icon-list-alt"></i>
                                <h3>Map</h3>
                            </div>
                            <!-- /widget-header -->

                            <div class="widget-content">
                                <div id="map" style="width: 100%; height: 500px;"></div>
                                <canvas id="bar-chart" class="chart-holder" height="250" width="538"></canvas>
                            </div>
                            <!-- /widget-content -->

                        </div>
                        <!-- /widget -->

                    </div>
                </div>
                <!-- /row -->

            </div>
            <!-- /container -->

        </div>
        <!-- /main-inner -->

    </div>
    <!-- /main -->

    <!-- /extra -->
    <div class="footer">
        <div class="footer-inner">
            <div class="container">
                <div class="row">
                    <div class="span12"> &copy; 2016 <a href="#">Team Xtreme</a>. </div>
                    <!-- /span12 -->
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
        <!-- /footer-inner -->
    </div>
    <!-- /footer -->
    <!-- Le javascript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://maps.googleapis.com/maps/api/js?callback=initMap" async defer></script>
    <script src="report-resource/js/jquery-1.7.2.min.js"></script>
    <script src="report-resource/js/excanvas.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1-beta.2/Chart.min.js"></script>
    <!--script src="report-resource/js/chart.min.js" type="text/javascript"></script-->
    <script src="report-resource/js/bootstrap.js"></script>
    <script language="javascript" type="text/javascript" src="report-resource/js/full-calendar/fullcalendar.min.js"></script>

    <script src="report-resource/js/base.js"></script>
    <script>
        function initMap() {
            window.map = new google.maps.Map(document.getElementById('map'), {
                center: {
                    lat: 1.352083,
                    lng: 103.819836
                },
                zoom: 11,
                // mapTypeId: google.maps.MapTypeId.TERRAIN
                mapTypeControl: false
            });
            window.ctaLayer = new google.maps.KmlLayer({
                url: 'http://appbox.com.my/singapore.kml',
                map: window.map
            });
            var stats = JSON.parse('{{statcount|raw}}');
            console.log(stats);
            var marker1 = new google.maps.Marker({
                position: {lat: 1.36492215 , lng: 103.72467041},
                map: window.map,
                title: 'WEST',
//                icon: {
//                    url: "images/markers/svg/Coffee_3.svg",
//                    scaledSize: new google.maps.Size(64, 64)
//                },
                label: {text: ""+stats[1]}
            });
            var marker2 = new google.maps.Marker({
                position: {lat: 1.40000548 , lng: 103.82354736},
                map: window.map,
                title: 'NORTH',
//                icon: {
//                    url: "images/markers/svg/Coffee_3.svg",
//                    scaledSize: new google.maps.Size(64, 64)
//                },
                label: {text: ""+stats[2]}
            });
            var marker3 = new google.maps.Marker({
                position: {lat: 1.31000548 , lng: 103.82354736},
                map: window.map,
                title: 'SOUTH',
//                icon: {
//                    url: "images/markers/svg/Coffee_3.svg",
//                    scaledSize: new google.maps.Size(64, 64)
//                },
                label: {text: ""+stats[3]}
            });
            var marker4 = new google.maps.Marker({
                position: {lat: 1.36492215 , lng: 103.92467041},
                map: window.map,
                title: 'EAST',
//                icon: {
//                    url: "images/markers/svg/Coffee_3.svg",
//                    scaledSize: new google.maps.Size(64, 64)
//                },
                label: {text: ""+stats[4]}
            });
        }
    </script>
    <script>
        var pieData = JSON.parse('{{categories|raw}}');

        var myPie = new Chart(document.getElementById("pie-chart").getContext("2d")).Pie(
            pieData, 
            {responsive: true, 
             tooltipEvents: ["mousemove", "touchstart", "touchmove"], 
             animateRotate : true});

        var barChartData = {
            labels: ["January", "February", "March", "April", "May", "June", "July"],
            datasets: [
                {
                    fillColor: "rgba(220,220,220,0.5)",
                    strokeColor: "rgba(220,220,220,1)",
                    data: [65, 59, 90, 81, 56, 55, 40]
				},
                {
                    fillColor: "rgba(151,187,205,0.5)",
                    strokeColor: "rgba(151,187,205,1)",
                    data: [28, 48, 40, 19, 96, 27, 100]
				}
			]

        }

        var myLine = new Chart(document.getElementById("bar-chart").getContext("2d")).Bar(barChartData);
//        var myLine = new Chart(document.getElementById("bar-chart1").getContext("2d")).Bar(barChartData);
//        var myLine = new Chart(document.getElementById("bar-chart2").getContext("2d")).Bar(barChartData);
//        var myLine = new Chart(document.getElementById("bar-chart3").getContext("2d")).Bar(barChartData);
    </script>
</body>

</html>